{% if saved_opportunities is defined and saved_opportunities %}
    {% for opportunity in saved_opportunities %}
    <tr class="hover:bg-gray-50 transition-colors opportunity-row cursor-pointer"
        data-url="{{ opportunity.url }}"
        data-base-url="{{ opportunity.base_url }}"
        data-nombre="{{ opportunity.nombre_original }}"
        data-pais="{{ opportunity.país }}"
        data-og_resumida="{{ opportunity.og_resumida }}"
        data-id="{{ opportunity.id }}"
        data-categoria="{{ opportunity.categoría }}"
        data-inscripcion="{{ opportunity.inscripcion }}">
        <td class="px-4 py-3 text-sm text-gray-900">
            {{ opportunity.nombre_original }}
        </td>
        <td class="px-4 py-3 text-sm text-gray-600 hidden sm:table-cell">
            {{ opportunity.fecha_de_cierre }}
        </td>
        <td class="px-4 py-3 text-sm text-gray-600">
            <div class="flex items-center justify-center gap-2">
                <button 
                    class="preview-btn px-3 py-1 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100"
                    data-url="{{ opportunity.url }}"
                    data-base-url="{{ opportunity.base_url }}"
                    data-nombre="{{ opportunity.nombre_original }}"
                    data-pais="{{ opportunity.país }}"
                    data-og_resumida="{{ opportunity.og_resumida }}"
                    data-id="{{ opportunity.id }}"
                    data-categoria="{{ opportunity.categoría }}"
                    data-inscripcion="{{ opportunity.inscripcion }}"
                    onclick="if(window.showOpportunityDetails) { event.stopPropagation(); window.showOpportunityDetails(this, event); }"
                >
                    Ver
                </button>
                <button hx-delete="/delete_opportunity/{{ opportunity.id }}"
                        hx-target="#saved-opportunities-list"
                        hx-swap="innerHTML"
                        hx-indicator="#layout-spinner"
                        class="delete-btn text-red-500 hover:text-red-700 transition-colors"
                        title="Eliminar de mi espacio"
                        onclick="event.stopPropagation()">
                    ✕
                </button>
            </div>
        </td>
    </tr>
    {% endfor %}
{% else %}
    <tr>
        <td colspan="3" class="p-4 text-center text-gray-500">
            No hay oportunidades guardadas
        </td>
    </tr>
{% endif %} 
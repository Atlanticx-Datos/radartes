{% if saved_opportunities %}
    {% for opportunity in saved_opportunities %}
    <tr class="hover:bg-gray-50 transition-colors">
        <td class="px-4 py-3 text-sm text-gray-900">
            {{ opportunity.resumen_generado_por_la_ia }}
        </td>
        <td class="px-4 py-3 text-sm text-gray-600">
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                {{ opportunity.disciplina.split(',')[0].strip() if opportunity.disciplina else '' }}
            </span>
        </td>
        <td class="px-4 py-3 text-sm text-gray-600">
            {{ opportunity.país }}
        </td>
        <td class="px-4 py-3 text-sm text-gray-600">
            {% if opportunity.inscripcion == 'Sin cargo' or not opportunity.inscripcion %}
                <div class="relative inline-block">
                    <svg class="w-5 h-5 text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v12M15 9.5C15 8.7 14.3 8 13.5 8h-3C9.7 8 9 8.7 9 9.5S9.7 11 10.5 11h3c0.8 0 1.5 0.7 1.5 1.5v0c0 0.8-0.7 1.5-1.5 1.5h-3C9.7 14 9 14.7 9 15.5"/>
                    </svg>
                    <svg class="absolute top-0 left-0 w-5 h-5 text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <line x1="5" y1="5" x2="19" y2="19"/>
                    </svg>
                </div>
            {% else %}
                <svg class="w-5 h-5 text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 6v12M15 9.5C15 8.7 14.3 8 13.5 8h-3C9.7 8 9 8.7 9 9.5S9.7 11 10.5 11h3c0.8 0 1.5 0.7 1.5 1.5v0c0 0.8-0.7 1.5-1.5 1.5h-3C9.7 14 9 14.7 9 15.5"/>
                </svg>
            {% endif %}
        </td>
        <td class="px-4 py-3 text-sm text-gray-600">
            {{ opportunity.fecha_de_cierre | format_date }}
        </td>
        <td class="px-4 py-3 text-sm text-gray-600">
            <div class="flex items-center justify-center gap-2">
                <button 
                    class="preview-btn px-3 py-1 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100"
                    data-url="{{ opportunity.url }}"
                    data-name="{{ opportunity.nombre_original }}"
                    data-country="{{ opportunity.país }}"
                    data-summary="{{ opportunity.og_resumida }}"
                    data-id="{{ opportunity.id }}"
                    data-category="{{ opportunity.categoría }}"
                    data-inscripcion="{{ opportunity.inscripcion }}"
                >
                    Ver
                </button>
                <button hx-delete="/delete_opportunity/{{ opportunity.id }}"
                        hx-target="#saved-opportunities-list"
                        hx-swap="outerHTML"
                        class="text-red-500 hover:text-red-700 transition-colors"
                        title="Eliminar de mi espacio">
                    ✕
                </button>
            </div>
        </td>
    </tr>
    {% endfor %}
{% else %}
    <tr>
        <td colspan="6" class="p-4 text-center text-gray-500">
            No hay oportunidades guardadas
        </td>
    </tr>
{% endif %} 
{% extends 'layout.html' %}

{% block body %}
<div class="px-4 md:px-8 mt-4 md:mt-0">

    <!-- Main content -->
    <main class="w-full relative">
        <div class="grid grid-cols-1 md:grid-cols-12 gap-0">
            <!-- First Column: Accordion -->
            <div class="col-span-1 md:col-span-5 lg:col-span-4 flex flex-col justify-between min-w-0 md:border-r border-neutral">
                <div class="flex-1 flex flex-col gap-2">
                    <!-- Accordion: Cierran Pronto -->
                    <div class="join join-vertical w-full">
                        <div class="collapse join-item border-b border-neutral rounded-none w-full">
                            <input type="radio" name="my-accordion-1" checked="" />
                            <div class="collapse-title text-sm tracking-tighter text-neutral-700 inline-block">
                                <span class="md:border border-neutral-300 md:px-4 md:py-2">
                                    CIERRAN PRONTO
                                </span>
                            </div>
                            <div class="collapse-content w-full">
                                {% if closing_soon_pages %}
                                {% for page in closing_soon_pages %}
                                <p class="relative">
                                    <a href="{{ page.url }}" target="_blank"
                                        data-name="{{ page.nombre }}" data-country="{{ page.paÃ­s }}"
                                        class="cierran-pronto-link">
                                        {{ page.nombre | truncate(50) }}
                                        <span class="absolute right-0 top-1/2 transform -translate-y-1/2 flex items-center justify-center -mr-1">
                                            <span class="flex items-center justify-center group-hover:bg-slate-200 group-hover:rounded-md transition-all duration-200 p-2">
                                                <svg class="w-3 h-3 z-10" data-slot="icon" fill="none"
                                                    stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24"
                                                    xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        d="m4.5 19.5 15-15m0 0H8.25m11.25 0v11.25"></path>
                                                </svg>
                                            </span>
                                        </span>
                                    </a>
                                </p>
                                {% endfor %}
                                {% else %}
                                <p>No hay oportunidades este mes.</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Second Column: Results Table -->
            <div class="col-span-1 md:col-span-7 lg:col-span-8 min-w-0">
                <div class="border-b border-t border-neutral overflow-auto">
                    <table class="table-fixed w-full">
                        <tbody id="my-results">
                            {% include "_my_results.html" %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- Update the spinner element -->
<div id="layout-spinner" class="spinner h-8 w-8" style="display: none;">
    <img src="{{ url_for('static', filename='public/spinner.gif') }}" alt="Loading...">
</div>

<style>
    .spinner {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
    }
</style>


{% endblock %}